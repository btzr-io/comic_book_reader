{"version":3,"sources":["webpack:///route-files.chunk.0e3b0.js","webpack:///./routes/files/style.less?67c6","webpack:///./routes/files/index.js"],"names":["webpackJsonp","6bca","module","exports","view","drag","actions","drop","va4u","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","d","Files","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1__style__","n","__WEBPACK_IMPORTED_MODULE_1__style___default","__WEBPACK_IMPORTED_MODULE_2_preact_router__","__WEBPACK_IMPORTED_MODULE_3__components_icon__","__WEBPACK_IMPORTED_MODULE_4__components_button__","FileInput","_ref","filters","onChange","type","style","display","accept","join","event","target","files","_ref2","name","_Component","props","_this","this","state","file","openLibrary","handleFile","setState","openFile","console","log","fileInput","base","click","handleDrop","preventDefault","dataTransfer","handleDragOver","handleDragLeave","componentDidMount","componentWillUnmount","render","_this2","a","class","ondrop","bind","ondragleave","ondragover","title","translatable","description","ref","c","icon","onClick"],"mappings":"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","file":"route-files.chunk.0e3b0.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ \"6bca\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"view\":\"view__3a64A view__2Haw2\",\"drag\":\"drag__cJHHu\",\"actions\":\"actions__2g3Vi\",\"drop\":\"drop__3cjtg\"};\n\n/***/ }),\n\n/***/ \"va4u\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Files; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__style__ = __webpack_require__(\"6bca\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_router__ = __webpack_require__(\"/QC5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_icon__ = __webpack_require__(\"Xow1\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_button__ = __webpack_require__(\"rAoZ\");\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\nvar FileInput = function FileInput(_ref) {\n  var filters = _ref.filters,\n      _onChange = _ref.onChange;\n  return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', {\n    type: 'file',\n    style: { display: 'none' },\n    accept: filters.join(', '),\n    onChange: function onChange(event) {\n      return _onChange(event.target.files[0]);\n    }\n  });\n};\n\nvar _ref2 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(__WEBPACK_IMPORTED_MODULE_3__components_icon__[\"a\" /* default */], { name: 'arrow-down' });\n\nvar Files = function (_Component) {\n  _inherits(Files, _Component);\n\n  function Files(props) {\n    _classCallCheck(this, Files);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.state = {\n      file: null,\n      drag: false\n    };\n\n    _this.filters = ['.pdf', '.cbr', '.cbt', '.cbz'];\n    return _this;\n  }\n\n  Files.prototype.openLibrary = function openLibrary() {\n    Object(__WEBPACK_IMPORTED_MODULE_2_preact_router__[\"route\"])('/library');\n  };\n\n  Files.prototype.handleFile = function handleFile(file) {\n    file && this.setState({ file: file });\n  };\n\n  Files.prototype.openFile = function openFile() {\n    // Open file dialog\n    console.log(this.fileInput);\n    this.fileInput.base.click();\n  };\n\n  Files.prototype.handleDrop = function handleDrop(event) {\n    event.preventDefault();\n    var files = event.dataTransfer.files;\n\n    var file = files ? files[0] : null;\n    this.setState({ file: file, drag: false });\n  };\n\n  Files.prototype.handleDragOver = function handleDragOver(event) {\n    event.preventDefault();\n    this.setState({ drag: true });\n  };\n\n  Files.prototype.handleDragLeave = function handleDragLeave() {\n    this.setState({ drag: false });\n  };\n\n  // gets called when this route is navigated to\n\n\n  Files.prototype.componentDidMount = function componentDidMount() {};\n\n  // gets called just before navigating away from the route\n\n\n  Files.prototype.componentWillUnmount = function componentWillUnmount() {};\n\n  Files.prototype.render = function render() {\n    var _this2 = this;\n\n    var drag = this.state.drag ? __WEBPACK_IMPORTED_MODULE_1__style___default.a.drag : '';\n\n    return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n      'div',\n      {\n        'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.view + ' ' + drag,\n        ondrop: this.handleDrop.bind(this),\n        ondragleave: this.handleDragLeave.bind(this),\n        ondragover: this.handleDragOver.bind(this)\n      },\n      Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        'h1',\n        { 'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.title, translatable: 'true' },\n        _ref2\n      ),\n      Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        'p',\n        { 'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.description, translatable: 'true' },\n        'Choose a file or drop it here.'\n      ),\n      Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(FileInput, {\n        ref: function ref(c) {\n          return _this2.fileInput = c;\n        },\n        filters: this.filters,\n        onChange: this.handleFile\n      }),\n      Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        'div',\n        { 'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.actions },\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          __WEBPACK_IMPORTED_MODULE_4__components_button__[\"a\" /* default */],\n          { icon: 'folder', onClick: this.openFile.bind(this) },\n          'Choose file'\n        ),\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          __WEBPACK_IMPORTED_MODULE_4__components_button__[\"a\" /* default */],\n          { icon: 'bookmark', type: 'secondary', onClick: this.openLibrary },\n          'Open library'\n        )\n      )\n    );\n  };\n\n  return Files;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-files.chunk.0e3b0.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"view\":\"view__3a64A view__2Haw2\",\"drag\":\"drag__cJHHu\",\"actions\":\"actions__2g3Vi\",\"drop\":\"drop__3cjtg\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./routes/files/style.less\n// module id = 6bca\n// module chunks = 4","import { h, Component } from 'preact'\nimport style from './style'\n\nimport { route } from 'preact-router'\nimport Icon from '../../components/icon'\nimport Button from '../../components/button'\n\nconst FileInput = ({ filters, onChange }) => (\n  <input\n    type=\"file\"\n    style={{ display: 'none' }}\n    accept={filters.join(', ')}\n    onChange={event => onChange(event.target.files[0])}\n  />\n)\n\nexport default class Files extends Component {\n  state = {\n    file: null,\n    drag: false,\n  }\n\n  constructor(props) {\n    super(props)\n    this.filters = ['.pdf', '.cbr', '.cbt', '.cbz']\n  }\n\n  openLibrary() {\n    route('/library')\n  }\n\n  handleFile(file) {\n    file && this.setState({ file })\n  }\n\n  openFile() {\n    // Open file dialog\n    console.log(this.fileInput)\n    this.fileInput.base.click()\n  }\n\n  handleDrop(event) {\n    event.preventDefault()\n    const { files } = event.dataTransfer\n    const file = files ? files[0] : null\n    this.setState({ file, drag: false })\n  }\n\n  handleDragOver(event) {\n    event.preventDefault()\n    this.setState({ drag: true })\n  }\n  handleDragLeave() {\n    this.setState({ drag: false })\n  }\n\n  // gets called when this route is navigated to\n  componentDidMount() {}\n\n  // gets called just before navigating away from the route\n  componentWillUnmount() {}\n\n  render() {\n    const drag = this.state.drag ? style.drag : ''\n\n    return (\n      <div\n        class={`${style.view} ${drag}`}\n        ondrop={this.handleDrop.bind(this)}\n        ondragleave={this.handleDragLeave.bind(this)}\n        ondragover={this.handleDragOver.bind(this)}\n      >\n        <h1 class={style.title} translatable=\"true\">\n          <Icon name={'arrow-down'} />\n        </h1>\n        <p class={style.description} translatable=\"true\">\n          Choose a file or drop it here.\n        </p>\n        <FileInput\n          ref={c => (this.fileInput = c)}\n          filters={this.filters}\n          onChange={this.handleFile}\n        />\n        <div class={style.actions}>\n          <Button icon=\"folder\" onClick={this.openFile.bind(this)}>\n            Choose file\n          </Button>\n          <Button icon=\"bookmark\" type=\"secondary\" onClick={this.openLibrary}>\n            Open library\n          </Button>\n        </div>\n      </div>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./routes/files/index.js"],"sourceRoot":""}